source_dir: .git/hooks

pre-commit:
  parallel: true
  commands:
    lint:
      run: npm run lint
      stage_fixed: true
    format:
      run: npm run format:check
      stage_fixed: true

commit-msg:
  commands:
    commitlint:
      run: npx commitlint --edit {1}

pre-push:
  parallel: false # Sequencial para garantir ordem correta
  commands:
    validate-basics:
      run: |
        echo "üîç Valida√ß√£o b√°sica..."
        npm run validate
    test-with-snapshots:
      run: |
        echo "üß™ Testando com poss√≠vel atualiza√ß√£o de snapshots..."
        npm test 2>/dev/null || {
          echo "üì∏ Atualizando snapshots..."
          npm run test:snapshots
          git add "**/__snapshots__/**" || true
        }
    sonar-check:
      run: |
        echo "üîç Verifica√ß√£o SonarQube..."
        if command -v sonar-scanner >/dev/null 2>&1; then
          echo "Rodando an√°lise SonarQube local..."
          npm run sonar:local 2>/dev/null || {
            echo "‚ö†Ô∏è  SonarQube local n√£o dispon√≠vel. Continuando..."
          }
        else
          echo "üí° SonarQube Scanner n√£o instalado. Para instalar:"
          echo "   npm install -g sonarqube-scanner"
        fi
